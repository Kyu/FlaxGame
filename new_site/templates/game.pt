<!DOCTYPE html metal:define-macro="game">

<html lang="en">
<head>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <title>Game Display: ${name}</title>
</head>
<body>
    <!--
    <h1>Hello, ${'world'}!</h1>
    <table>
      <tr #tal:repeat="row 'apple', 'banana', 'pineapple'">
        <td #tal:repeat="col 'juice', 'muffin', 'pie'"> # next line {row.capitalize()} {col}
        </td>
      </tr>
    </table>
    -->
<div>
    <a href="${request.application_url}/logout">Logout</a>
</div>

<h1>Logged in as: ${name} at location ${player.location}</h1>
<!-- TODO chat -->
<table>
<tr tal:repeat="hex_col [i for i in range(1, 11)]">
    <td tal:repeat="hex_row [i.name for i in hexes if i.x == hex_col]" class="hexes">
        <h3><a href="${request.route_url('game')}/${hex_row}">${hex_row}</a></h3>
    </td>

</tr>

</table>

<div tal:condition="hex" class="hex">
    <h3>Viewing hex ${hex.name} sitting on ${hex.x} point ${hex.y}</h3>

    <table tal:condition="currently_here">
        <h2>Also here:</h2>
        <!-- TODO interact with other players (attack, give stuff?)  -->
        <tr tal:repeat="here_info [i for i in currently_here if i.username != view.logged_in]">
        <td>
            <p>${here_info.username} who is a ${here_info.squad_type} for team ${here_info.team} with ${here_info.troops} troops</p>
        </td>
        </tr>
    </table>
    <!-- TODO move from location to location -->
    <a tal:condition="movable" href="$/moveto/">You can move here</a>
</div>

</body>
</html>