<html lang="en">
<head>
    <title>Admin: ${name}</title>
</head>

<body>

<!-- TODO admin sessions should last 4 hours -->
<div class="playerinfo">
    <h2>View player Info</h2>
    <form action="${request.route_url('player_info')}" method="post">
        <input type="text"placeholder="Player username"
           name="username"/><br/>
        <button name="Ban">View Player info</button>
    </form>
    <div id="flash" tal:condition="request.session.peek_flash('player_info')">
        <ul>
            <li tal:repeat="info request.session.pop_flash('player_info')">
                <p>${info}</p>
            </li>
        </ul>
    </div>
</div>

<!-- TODO hide announcement -->
<div class="announcement">
    <h2>Send Announcement</h2>
    <div id="flash" tal:condition="request.session.peek_flash('announcement_info')">
        <span tal:omit-tag=""
            tal:repeat="info request.session.pop_flash('announcement_info')">
            ${info}<br>
        </span>
    </div>
    <form action="${request.route_url('broadcast')}" method="post">
        <input type="text" placeholder="Enter Announcement"
           name="message"/><br/>
        <button name="Send">Send!</button>
    </form>
</div>

<div class="hide-announcement">
    <h2>Hide Announcement</h2>
    <div id="flash" tal:condition="request.session.peek_flash('announcement_info2')">
        <span tal:omit-tag=""
            tal:repeat="info request.session.pop_flash('announcement_info2')">
            ${info}<br>
        </span>
    </div>
    <form action="${request.route_url('hide_broadcast')}" method="post">
        <input type="number" placeholder="Enter Announcement ID"
           name="id"/><br/>
        <button name="Send">Hide!</button>
    </form>
</div>

<div id="ban">
    <h2>Ban Player</h2>
    <div id="flash" tal:condition="request.session.peek_flash('ban_info')">
        <span tal:omit-tag=""
            tal:repeat="info request.session.pop_flash('ban_info')">
            ${info}<br>
        </span>
    </div>
    <form action="${request.route_url('ban_player')}" method="post">
        <input type="text"placeholder="Player username"
           name="username"/><br/>
        <input type="text" id="reason" placeholder="Reason for ban"
           name="reason"/><br/>
        <input type="datetime-local"
           name="until"/>Length of ban (keep blank for permanent)<br/>
        <button name="Ban">Ban!</button>
    </form>
</div>

<div class="unban">
    <h2>UnBan Player</h2>
    <div id="flash" tal:condition="request.session.peek_flash('unban_info')">
        <span tal:omit-tag=""
            tal:repeat="info request.session.pop_flash('unban_info')">
            ${info}<br>
        </span>
    </div>
    <form action="${request.route_url('unban_player')}" method="post">
        <input type="text" placeholder="Player username"
           name="username"/><br/>
        <button name="Ban">UnBan!</button>
    </form>
</div>

</body>
</html>
